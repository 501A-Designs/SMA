<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SMA</title>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.22.1/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.22.1/firebase-analytics.js"></script>
    <!-- firebase auth -->
    <script src="https://www.gstatic.com/firebasejs/7.22.1/firebase-auth.js"></script>
    <!-- Cloud Firestore -->
    <script src="https://www.gstatic.com/firebasejs/7.22.1/firebase-firestore.js"></script>

    <link
    href="https://fonts.googleapis.com/css2?family=Sawarabi+Gothic&display=swap"
    rel="stylesheet"
    />
    <!-- CSS -->
    <link rel="stylesheet" href="./css/color.css">
    <link rel="stylesheet" href="./css/desktop.css">
    <link rel="stylesheet" href="./css/mobile.css">
    <link rel="stylesheet" href="./css/static.css">
    <link rel="stylesheet" href="./css/variables.css">
    
    <script src="app.js" defer></script>
    <script src="functions.js" defer></script>
    <script src="create.js" defer></script>

  </head>
  <body>
    <section class="loadingAni">
      <div></div>
      <h3>少々お待ち下さい</h3>
    </section>

    <!-- Loading and loading text -->
    <section class="loadObject">
      <p></p>
      <div id="submitDiv">
        <input id="txtWebsitePassword" type="password" placeholder="認証コードを入力" />
        <button id="btnWebsiteVerify" class="standardButton greenBtn">認証</button>
      </div>
    </section>

    <!-- Version alert pop up -->
    <section id="versionNotify">
      <button onclick="eraseVersionNotify()">✕</button>
      <a href="about.html#version">SMA v<span class="smaVersion"></span> にアップデートされました！</a>
      <p id="erasedDate"></p>
    </section>

    <section id="loginPopUp" style="display: none;">
      <button class="close" onclick="loginPopUpFunction()"></button>
      <h2 style="margin: var(--containerGap)">👥 ログインについて：</h2>
      ログインは、管理者に送られるメールパスワードを使用し、ご利用のグーグルアカウントですることができます。パスワードを入力する際正しいか確認してください。確認した上、まだ入れないようであれば、SMA Information Pageにある［ログインリクエスト］のボタンを押すことでアカウント作成の依頼を送信することが可能となります。ご理解ご協力の方よろしくおねがいします。<br /><br />
      <div id="loginContainer">
          <div id="submitDiv">
            <input id="txtPassword" type="password" placeholder="パスワードを入力" />
            <button
              id="btnLogin"
              class="standardButton greenBtn"
            >
              ログイン
            </button>
          </div>
      </div>
    </section>

    <section id="announcePopUp" hidden="true">
      <button class="close" onclick="announcePopUpFunction()"></button>
      <h2>📣 新しいアナウンス</h2>
      新しいアナウンスを書き終え、［アナウンス　→］ボタンを押すと投稿が SMA
      のサイト上に誰もが閲覧できるようになります。<br /><br />
      <input id="announceTitle" style="max-width: 500px;" type="text" placeholder="記事のタイトル" /><br /><br /><hr><br />
      投稿日 <input id="announceStartDate" type="date" /><br />
      締切日 <input id="announceEndDate" type="date" /><br /><br />
      <textarea id="announceContent"
                cols="30"
                rows="8"
                placeholder="アナウンスの内容"
                style="width: 85%; resize: none;"></textarea>
      <br><br>
      <input id="publishAnnounce" type="submit" value="アナウンス →" class="standardButton" style="background-color: var(--green);cursor: pointer;"></input>
    </section>

    <section  class="header">
      <img src="SMA.png" class="smaLogo" alt="No Logo">
      <h2 class="mobileErase" style="margin-top: 30px; user-select: none;">
        Share My Activity
      </h2>
      <h1 class="desktopErase" style="margin-top: 5px; user-select: none;">SMA</h1>
    </section>

    <section id="filter">
      <button class="tagButton" id="allPosts" style="background-color: var(--grey); display: none;" onclick="window.location.reload();">全ての投稿</button>
      <button class="tagButton" id="casFilter" style="background-color: var(--purple);">CAS Activities</button>
      <button class="tagButton" id="saaFilter" style="background-color: var(--orange);">S&A Activities</button>
      <!-- <button class="tagButton">LO1</button>
      <button class="tagButton">LO2</button>
      <button class="tagButton">LO3</button>
      <button class="tagButton">LO4</button>
      <button class="tagButton">LO5</button>
      <button class="tagButton">LO6</button>
      <button class="tagButton">LO7</button>  -->
    </section>

    <p id="cautionNote">
      ！！ 注意 ！！<br />スマートフォンまた小さいディスプレイご利用の場合は、投稿されている活動のフィルター等はできないです。ご了承ください。
    </p>

    <section id="postButtons" hidden="true">
      <div style="display: flex; gap: 5px; margin-bottom: 10px;">
        <button
          class="standardButton greenBtn"
          onclick="blockDisplay(1)"
        >
          <!-- + 活動記事を追加 -->
          + 記事追加
        </button>
        <button class="standardButton redBtn"
        onclick="window.location.href='https://forms.gle/Y3G1jXno3mKPgZHp6';">
          - 記事消去をリクエスト
        </button>
        <button class="standardButton blueBtn"
        onclick="window.location.reload();">ページを更新</button>
      </div>
    </section>
<!---->
    <div id="gridContainer">
      <section id="announceObject">
        <h3 style="margin-left: 10px;">Announce 📣</h3>
        <button class="standardButton greenBtn" id="announcePostButton" onclick="announcePopUpFunction()">+ アナウンスを追加</button>
        <section id="announcePosts">
        </section>
        <p>ここから先アナウンスはありません</p>
      </section>


      <section class="gridObject">
        <section id="createPost" hidden="true"> 
          <!-- add this above (in section tag)  id="createPost" hidden="true" -->
          <button class="close" onclick="blockDisplay()"></button>
            <h2 style="margin-top: var(--containerGap);">🔧 新しい活動：</h2>
            新しい活動を書き終え、［記事完了］ボタンを押すと投稿が SMA
            のサイト上に誰もが閲覧できるようになります。パスワードや個人情報等は投稿しないよう注意をお願いします。また、一度完了を押すと記事は編集することができないです。なお、日程は今現在（本日）を選び、記事作成の際には全ての欄を記入する必要があります。<br /><br /><hr><br>
            <form>
            活動種類を選んでください：
              <input type="radio" name="activityType" id="casLabel" value="CAS">CAS活動</input>
              <input type="radio" name="activityType" id="saaLabel" value="S&A">S&A活動</input>
            </form>
            <!-- 
            <br>
            <form id="loForm">
              主要なラーニングアウトカム（LO）を一つ選んでください：<br>
              <input type="radio" name="loType" id="lo1" value="LO1">1：自らの長所と成長すべき点を認識する。</input><br>
              <input type="radio" name="loType" id="lo2" value="LO2">2：課題に挑戦し、その過程で新しいスキルを習得している。</input><br>
              <input type="radio" name="loType" id="lo3" value="LO3">3：自らCASを計画し開始することができる。</input><br>
              <input type="radio" name="loType" id="lo4" value="LO4">4：CAS活動を継続し、やり遂げる粘り強さを示す。</input><br>
              <input type="radio" name="loType" id="lo5" value="LO5">5：自らのスキルを活かし、また他者と共に活動する意義を認識する。</input><br>
              <input type="radio" name="loType" id="lo6" value="LO6">6：グローバルな問題に取り組む。</input><br>
              <input type="radio" name="loType" id="lo7" value="LO7">7：選択と行動の倫理を認識し、考察する。</input>
            </form> -->
            <br>
            <input id="postTitle" style="max-width: 350px;" type="text" placeholder="記事のタイトル" />
            <input id="postAuthor" type="text" placeholder="学年・クラス" />
            <input id="postDate" type="date" /><br /><br />
            <textarea
            id="postContent"
              name="bruh"
              cols="30"
              rows="8"
              placeholder="記事内容"
              style="width: 85%; resize: none;"
            ></textarea>
            <!-- 
            <br />
            <p>以下は必須項目ではありません（リンクを加えたい人の為）：</p>
            <div>
              <section class="linksContainer">
                <input type="text" id="postLinkName" placeholder="リンク名">
                <input type="url" id="postLink" style="width: 40%;" placeholder="URLリンク">
              </section>
            </div> -->
            <!-- <button class="standardButton" style="margin-left:5px; background-color: var(--grey2);">+ リンクを加える</button> -->
            <br />
            <br />
            <button id="firstSubmit" class="standardButton blueBtn" onclick="confirmPrompt()">→　記事完了</button>
            <div id="confirmDiv">
              <p>
                <h2 style="color: crimson; font-weight: bold; text-align: center;">投稿する前！</h2><br>
                以下の条件を沿った上活動投稿が許可されます：
                <ul>
                  <li>投稿している人は開智日本橋学園高等学校の生徒・教員である</li>
                  <li>投稿内容に人が不快に思うようなコンテンツが含まれていない</li>
                  <li>リンクは不可無くアクセスでき、人が不快に思うようなコンテンツが含まれていない</li>
                  <li>名前、年齢、メールアドレス、パスワードなどの個人情報等を載せいない</li>
                </ul>
                詳しくは<a href="about.html#tos" target="_blank">SMA利用規約</a>を確認してください。<br>なお、投稿した後は［ページ更新］ボタンを押すと自身の投稿が閲覧できます。
              </p>
              <br>
              <input id="publishPost" type="submit" value="記事投稿　→" class="standardButton" style="background-color: var(--green);cursor: pointer;"></input>
            </div>
        </section>  
        <!--
        <h4 style="text-align: center; color: black">・・・<br>投稿はここ以下無いです</h4>-->
      </section>

      <section class="sidebarBoxes">
        <!-- <section>
          <div class="buttonsContainer">
            <button class="standardButton" style="background-color: var(--grey2)" onclick="">
              ← 新規の投稿
            </button>
            <button class="standardButton" style="background-color: var(--grey2)" onclick="">
              過去の投稿 →
            </button>
          </div>
        </section> -->

        <section class="desktopErase">
          <hr class="largeHr">
          <h2>Profile・Others</h2>
          <!-- LOGIN SECTION GOES HERE -->
          </section>
          <div style="text-align: center" class="sidebarBox" id="whenSignedOut">
            <h3>ログインされていません</h3>
            <div class="buttonsContainer">
              <button class="standardButton greenBtn" onclick="loginPopUpFunction()">
                ログイン
              </button>
            </div>
          </div>
          
          <section style="text-align: center" class="sidebarBox" id="whenSignedIn" hidden="true">
            <div id="userDetails"></div>
            <div class="buttonsContainer">
              <!--Logout button | hidden by default-->
              <button id="btnLogout" class="standardButton redBtn">
                ログアウト
              </button>
            </div>
          </section>

        <!-- OTHERS CONTAINER -->
        <section id="addFeature" hidden="true">
          <button class="standardButton" onclick="window.open('https://forms.gle/scDFYdD3nV3Hny3e6','_blank');" style="width: 100%; margin-bottom: 10px;"">↑ CAS確認要望</button>
          <div>
            <button class="standardButton orangeBtn" onclick="window.open('https://forms.gle/cMwf16UFR9ZwxvoZ9','_blank');"><span style="font-size:30px">＋</span><br>機能のリクエスト</button>
            <button target='_blank' class="standardButton purpleBtn" onclick="window.open('https://forms.gle/CoFtiqqxxKxRFKkKA','_blank');"><span style="font-size:30px">🐝</span><br>バグ告知</button>
          </div>
        </section>

        <details class="sidebarBox">
          <summary>7つの Learning Outcome</summary>
          <div class="load-wave">
            <ol id="loENG" style="display: none;">
              <li>Identify your own strengths and develop areas for personal growth.
              </li>
              <li>Demonstrate challenges have been undertaken, developing new skills in the process.
              </li>
              <li>Demonstrate how to initate and plan a CAS experience.
              </li>
              <li>Show commitment to and perseverance in CAS experience.
              </li>
              <li>Demonstrate the skills and recognize the benfits of working collaboratively.
              </li>
              <li>Demonstrate engagement with issues of global significance.
              </li>
              <li>Recognize and consider the ethics of choices and actions.
              </li>
            </ol>
            <ol id="loJPN">
              <li>自らの長所と成長すべき点を認識する。</li>
              <li>課題に挑戦し、その過程で新しいスキルを習得している。</li>
              <li>自らCASを計画し開始することができる。</li>
              <li>CAS活動を継続し、やり遂げる粘り強さを示す。</li>
              <li>自らのスキルを活かし、また他者と共に活動する意義を認識する。</li>
              <li>グローバルな問題に取り組む。</li>
              <li>選択と行動の倫理を認識し、考察する。</li>
            </ol>
            <button id="langButton" onclick="langFunction()">Translate to English</button>
          </div>
        </details>

        <details class="sidebarBox" open>
          <summary>関連ウェブサイト</summary>
          <div  class="load-wave">
            <br>
            <section id="additionalSites">
              <button
                id="kngedjp"
                onclick="window.open('http://kng.ed.jp','_blank')"
              >
                開智日本橋学園
              </button>
              <button
                id="glcdlc"
                onclick="window.open('http://glcdlc.com','_blank')"
              >
                GLC・DLC
              </button>
              <button onclick="window.open('https://501a-designs.github.io/schedule-creator/','_blank')">
                時間割作成サイト
              </button>
              <!-- <button
                id="ibmanabu"
                onclick="window.open('http://glcdlc.com','_blank')"
              >
                🗣　IB学ぶ
              </button> -->
              <button
                id="learngeo"
                onclick="window.open('https://www.learngeowith.me/','_blank')"
              >
                LearnGeoWithMe
              </button>
            </section>
          </div>
        </details>

        <!-- <details class="sidebarBox" open>
          <summary>生徒によるウェブサイト</summary>
          <div  class="load-wave">
            <br>
            <section id="additionalSites">
              <button onclick="window.open('https://501a-designs.github.io/schedule-creator/','_blank')">
                時間割作成サイト
              </button>
              <button onclick="window.open('http://kng.ed.jp','_blank')">
                🌐　GLC・DLC
              </button>
              <button onclick="window.open('http://kng.ed.jp','_blank')">
                🗣　IB学ぶ
              </button>
              <button onclick="window.open('http://kng.ed.jp','_blank')">
                🗣　IB学ぶ
              </button>
            </section>
          </div>
        </details> -->

        <!-- DARK MODE BUTTON -->
        <section class="sidebarBox">
          <h4 style="margin-top: 0px;">色モード変更</h4>
          <div class="buttonsContainer">
            <button onclick="LtoD()" id="DtoL">🌄 朝モード</button>
            <button onclick="DtoL()" id="LtoD">🌃 夜モード</button>
          </div>         
        </section>

        <!-- OTHERS CONTAINER -->
        <section class="sidebarBox">
          <h4 style="margin-top: 0px;">Share My Activity</h4>
          <section id="additionalSites">
            <button onclick="window.open('about.html#about','_blank')">SMAについて</button>
            <button onclick="window.open('about.html#howto','_blank')">SMAの使用法</button>
          </section>
        </section>

        <h5 style="text-align: center; color: black">
          SMA バージョン <span class="smaVersion"></span><br><span id="loadEaster">・・・</span><br>
          <script>
            document.getElementById("loadEaster").addEventListener("click", ()=> {
              document.getElementById("initiateSnake").style.display="block";
              document.getElementById("initiateMulti").style.display="block";

              document.getElementById("initiateSnake").addEventListener("click", ()=> {
                document.getElementById("snakeG").style.display="block";
              });
              document.getElementById("initiateMulti").addEventListener("click", () => {
                document.getElementById("multiG").style.display = "block";
              });
            });
            // Hiding Command
            eraseSnake =()=>{
              document.getElementById("snakeG").style.display="none"
            }
            eraseMulti =()=>{
              document.getElementById("multiG").style.display="none"
            }
          </script>
          <a style="color: black" href="http://y-com.jp">Developed by 501A</a>
          <br>
          IP Written by Y.Y
        </h5>
        <button class="easterButton" id="initiateSnake">🐍 Snake</button>
        <button class="easterButton" id="initiateMulti">🔫 Multibattle</button>
        <!-- <button class="easterButton" id="initiate2048">🔢 2048</button> -->
      </section>
      <!-- Snake -->
      <section id="multiG" class="easterPopup" style="display: none;">
        <iframe src="https://scratch.mit.edu/projects/121736387/embed" allowtransparency="true" width="485" height="402" frameborder="0" scrolling="no" style="border-radius: 10px; float: right; margin-left: 10px;" allowfullscreen></iframe>
        <h2>Multibattle</h2>
        <p style="margin-right: 10px;">
          Original Multibattle from 2016 created by Skawa
          <br>
          To move Sonic use keys A,W, D, and Space
          <br>
          To move Megaman use arrow keys, and press P to shoot long range.
          <br>
          To move Ash use keys H,U,K and Y for power.
          <br>
          To move Captain America use keys C,F,V, and B
          <br>
          To move Gemack use number keys 4,5,6,8, and 7
          <br>
          <br>Also, because this is a hidden section within the main page your game play will not be logged in your browser
          history.
        </p>
        <button class="close" style="float: right;" onclick="eraseMulti()"></button>
      </section>
      <section id="snakeG" class="easterPopup" style="display: none;">
        <canvas id="gc" width="400" height="400" style="border-radius: 10px; float: right; margin-left: 10px;"></canvas>
        <h2>Snake Easter Egg</h2>
        <p style="margin-right: 10px;">Rules are simple, use "W","A","S","D" to move around. When you want to hide the game
          play, press the [Exit] button below. Once this command is executed your game will be running in the background, so
          once you press the snake button again, your game should still be running. Anyways, hope you have a little fun with
          this easter egg :)
          <br>
          <br>
          P.S : This game has not been created by SMA creator.
          <br>Also, because this is a hidden section within the main page your game play will not be logged in your browser
          history.
        </p>
        <button class="close" style="float: right;" onclick="eraseSnake()"></button>
        <script>
          window.onload = function () {
            canv = document.getElementById("gc");
            ctx = canv.getContext("2d");
            document.addEventListener("keydown", keyPush);
            setInterval(game, 1000 / 15);
          }

          px = py = 10;
          gs = tc = 20;
          ax = ay = 15;
          xv = yv = 0;
          trail = [];
          tail = 5;

          function game() {
            px += xv;
            py += yv;
            if (px < 0) {
              px = tc - 1;
            }
            if (px > tc - 1) {
              px = 0;
            }
            if (py < 0) {
              py = tc - 1;
            }
            if (py > tc - 1) {
              py = 0;
            }
            ctx.fillStyle = "black";
            ctx.fillRect(0, 0, canv.width, canv.height);
            ctx.fillStyle = "lime";
            for (var i = 0; i < trail.length; i++) {
              ctx.fillRect(trail[i].x * gs, trail[i].y * gs, gs - 2, gs - 2);
              if (trail[i].x == px && trail[i].y == py) {
                tail = 5;
              }
            }
            trail.push({ x: px, y: py });
            while (trail.length > tail) {
              trail.shift();
            }
            if (ax == px && ay == py) {
              tail++;
              ax = Math.floor(Math.random() * tc);
              ay = Math.floor(Math.random() * tc);
            }
            ctx.fillStyle = "red";
            ctx.fillRect(ax * gs, ay * gs, gs - 2, gs - 2);
          }

          function keyPush(evt) {
            switch (evt.keyCode) {
              case 65:
                xv = -1; yv = 0;
                break;
              case 87:
                xv = 0; yv = -1;
                break;
              case 68:
                xv = 1; yv = 0;
                break;
              case 83:
                xv = 0; yv = 1;
                break;

              //Link to more keyCodes: https://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes
            }
          }
        </script>
      </section>

      <!--PAGINATION BUTTON
        <section class="buttonsContainer">
        <button class="standardButton" style="background-color: lightblue;">🔃 もっと表示</button>
      </section> -->
    </div>
  </body>
</html>
